\documentclass[a4paper,10pt]{scrartcl}
\RequirePackage[hyperindex]{hyperref}

\begin{document}
\title{\texttt{cplint} on SWISH Manual}
\maketitle

%\section{Table of Contents}
%
%\begin{itemize}
%	\item \hyperref[syn]{Syntax} 
%	\item Inference \ref{inf}
%	\item Learning \ref{learning}
%\end{itemize}

\input{syntax}
\input{semantics}
\input{inference}

\verb|cplint| on SWISH allows two types of programs: LPAD and Prolog. In the first, you create a new LPAD in the editor, in the latter a Prolog program. 

In LPADs, you write in the editor the program without the library import and the compiler directives. \verb|pita| is used for inference.

You ask queries by writing the atom of which you want to compute the probability. In the coin example, the probability of \verb|heads(coin)| can be obtained with the 
\begin{verbatim}
?- heads(coin).
\end{verbatim}

In Prolog programs, you have to enter the program above (\verb|coin.pl|).

\input{inf_goals}


You can also see the probability of the query being true and 
being false as a bar chart with \verb|prob_bar(:Query:atom,-Probability:dict)| as in
\begin{verbatim}
?- prob_bar(heads(coin),P).
\end{verbatim}
if you include
\begin{verbatim}
:- use_rendering(c3).
\end{verbatim}
before \verb|:- pita.| \verb|P| will be instantiated with a
dict for rendering with \verb|c3|. It will be shown as a bar chart with
a bar for the probability of \verb|heads(coin)| true and a bar for the probability of \verb|heads(coin)| false.


When using \verb|mcintyre|, you can use
\begin{verbatim}
mc_prob_bar(:Query:atom,-Probability:dict).
\end{verbatim}
as in
\begin{verbatim}
?- mc_prob_bar(heads(coin),P).
\end{verbatim}
to obtain a chart representation of the probability.

You can obtain a bar chart of the samples with
\begin{verbatim}
?- mc_sample_bar(heads(coin),1000,Chart).
\end{verbatim}
that returns in \verb|Chart| a diagram with one bar for the number of successes and 
one bar for the number of failures.

You can also graph the results of sampling arguments with
\begin{verbatim}
mc_sample_arg_bar(:Query:atom,+Samples:int,?Arg:var,-Chart:dict).
mc_sample_arg_first_bar(:Query:atom,+Samples:int,
  ?Arg:var,-Chart:dict).
mc_rejection_sample_arg_bar(:Query:atom,:Evidence:atom,+Samples:int,
  ?Arg:var,-Chart:dict).
mc_mh_sample_arg_bar(:Query:atom,:Evidence:atom,+Samples:int,
  +Lag:int,?Arg:var,-Chart:dict).
\end{verbatim} 
that return in \verb|Chart| a bar chart with a bar for each possible sampled value whose size is the number of samples
returning that value.

An example is
\begin{verbatim}
?- mc_sample_arg_bar(reach(s0,0,S),50,S,Chart). 
\end{verbatim}
of \href{http://cplint.lamping.unife.it/example/inference/markov_chain.pl}{\texttt{markov\_chain.pl}}.

\input{parameters}

\input{learning}

\subsection{Commands}
\subsubsection{Parameter Learning}
To execute EMBLEM, prepare an input file in the editor panel as indicated above 
and call
\begin{verbatim}
?- induce_par(<list of folds>,P).
\end{verbatim}
where \verb|<list of folds>| is a list of the folds for training and
\verb|P| will contain the input program with updated parameters.

For example \href{http://cplint.lamping.unife.it/example/bongard.pl}{\texttt{bongard.pl}}, you can 
perform parameter learning on the \verb|train| fold with 
\begin{verbatim}
?- induce_par([train],P).
\end{verbatim}
A program can also be tested on a test set with
\begin{verbatim}
?- test(<program>,<list of folds>,LL,AUCROC,ROC,AUCPR,PR).
\end{verbatim}
where \verb|<program>| is a list of terms representing clauses and
\verb|<list of folds>| is a list of folds.
This returns the log likelihood of the test examples in \verb|LL|, the Area Under the ROC curve in \verb|AUCROC|, a dictionary containing the list of points (in the form of Prolog pairs \verb|x-y|) of the ROC curve in \verb|ROC|,
the Area Under the PR curve in \verb|AUCPR|, a dictionary containing the list of points of the PR curve in \verb|PR|.

For example, to test on fold \verb|test| the program learned on fold \verb|train| you can run the query
\begin{verbatim}
?- induce_par([train],P),
   test(P,[test],LL,AUCROC,ROC,AUCPR,PR).
\end{verbatim}
Or you can test the input program on the fold \verb|test| with
\begin{verbatim}
?- in(P),
   test(P,[test],LL,AUCROC,ROC,AUCPR,PR).
\end{verbatim}
By including
\begin{verbatim}
:- use_rendering(c3).
:- use_rendering(lpad).
\end{verbatim}
in the code before \verb|:- sc.| the curves will be shown as graphs and the output program will be pretty printed.



\subsubsection{Structure Learning}
To execute SLIPCOVER,
prepare an input file in the editor panel as indicated above 
and call
\begin{verbatim}
?- induce(<list of folds>,P).
\end{verbatim}
where \verb|<list of folds>| is a list of the folds for training and
\verb|P| will contain the learned program.

For example \href{http://cplint.lamping.unife.it/example/bongard.pl}{\texttt{bongard.pl}}, you can perform structure learning on the \verb|train| fold with 
\begin{verbatim}
?- induce([train],P).
\end{verbatim}
A program can also be tested on a test set with \verb|test/7| as
described above.

\input{learning_par}

\section{Manual in PDF}
A PDF version of the manual is available at
\url{https://github.com/friguzzi/cplint/blob/master/doc/help-cplint.pdf}.
\section{Bibliography}
\bibliographystyle{plain}
\bibliography{bib}
\end{document}