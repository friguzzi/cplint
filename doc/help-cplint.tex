\documentclass[a4paper,10pt]{article}
\RequirePackage[hyperindex]{hyperref}

\begin{document}
\title{\texttt{cplint} on SWISH Manual}
\maketitle

%\section{Table of Contents}
%
%\begin{itemize}
%	\item \hyperref[syn]{Syntax} 
%	\item Inference \ref{inf}
%	\item Learning \ref{learning}
%\end{itemize}

\input{syntax}
\input{semantics}
\input{inference}

\verb|cplint| on SWISH allows two types of programs: LPAD and Prolog. In the first, you create a new LPAD in the editor, in the latter a Prolog program. 

In LPADs, you write in the editor the program without the library import and the compiler directives. \verb|pita| is used for inference.

You ask queries by writing the atom of which you want to compute the probability. In the coin example, the probability of \verb|heads(coin)| can be obtained with the 
\begin{verbatim}
?- heads(coin).
\end{verbatim}

In Prolog programs, you have to enter the program above (\verb|coin.pl|) and ask the probability of an atom using \verb|pita| using the predicate \verb|prob/2| as in
\begin{verbatim}
?- prob(heads(coin),P).
\end{verbatim}
You can also see the probability of the query being true and 
being false as a bar chart with
\begin{verbatim}
?- prob_bar(heads(coin),P).
\end{verbatim}
if you include
\begin{verbatim}
:- use_rendering(c3).
\end{verbatim}
before \verb|:- pita.|

If the query is non-ground, \verb|prob/2| returns in backtracking the succesful instantiations together with their probability.

When using \verb|mcintyre|, the predicates for querying are \verb|mc_prob/2| and \verb|mc_prob_bar/2| as in
\begin{verbatim}
?- mc_prob(heads(coin),P).
?- mc_prob_bar(heads(coin),P).
\end{verbatim}
With \verb|mcintyre|, you can also take a given number of sample with a call such as
\begin{verbatim}
?- mc_sample(heads(coin),1000,T,F,P).
\end{verbatim}
that samples \verb|heads(coin)| 1000 times and returns in \verb|T| the number of successes, in \verb|F| the number of failures and in \verb|P| the
estimated probability (\verb|T/1000|).

You can obtain a bar chart of the samples with
\begin{verbatim}
?- mc_sample_bar(heads(coin),1000,Chart).
\end{verbatim}
that samples \verb|heads(coin)| 1000 times and returns in \verb|Char| a diagram with one bar for the number of successes and 
one bar for the number of failures.

If the query is non-ground, \verb|mc_prob/2|, \verb|mc_prob_bar/2|, \verb|mc_sample/5| and \verb|mc_sample_bar/3|  consider the query as existential
so they estimate the probability that there is a successful ground instantiation.

\input{parameters}

\input{learning}

\subsection{Commands}
\subsubsection{Parameter Learning}
To execute EMBLEM, prepare an input file in the editor panel as indicated above 
and call
\begin{verbatim}
?- induce_par(<list of folds>,P).
\end{verbatim}
where \verb|<list of folds>| is a list of the folds for training and
\verb|P| will contain the input program with updated parameters.

For example \href{http://cplint.lamping.unife.it/example/bongard.pl}{\texttt{bongard.pl}}, you can 
perform parameter learning on the \verb|train| fold with 
\begin{verbatim}
?- induce_par([train],P).
\end{verbatim}
A program can also be tested on a test set with
\begin{verbatim}
?- test(<program>,<list of folds>,LL,AUCROC,ROC,AUCPR,PR).
\end{verbatim}
where \verb|<program>| is a list of terms representing clauses and
\verb|<list of folds>| is a list of folds.
This returns the log likelihood of the test examples in \verb|LL|, the Area Under the ROC curve in \verb|AUCROC|, a dictionary containing the list of points (in the form of Prolog pairs \verb|x-y|) of the ROC curve in \verb|ROC|,
the Area Under the PR curve in \verb|AUCPR|, a dictionary containing the list of points of the PR curve in \verb|PR|.

For example, to test on fold \verb|test| the program learned on fold \verb|train| you can run the query
\begin{verbatim}
?- induce_par([train],P),
   test(P,[test],LL,AUCROC,ROC,AUCPR,PR).
\end{verbatim}
Or you can test the input program on the fold \verb|test| with
\begin{verbatim}
?- in(P),
   test(P,[test],LL,AUCROC,ROC,AUCPR,PR).
\end{verbatim}
By including
\begin{verbatim}
:- use_rendering(c3).
:- use_rendering(lpad).
\end{verbatim}
in the code before \verb|:- sc.| the curves will be shown as graphs and the output program will be pretty printed.



\subsubsection{Structure Learning}
To execute SLIPCOVER,
prepare an input file in the editor panel as indicated above 
and call
\begin{verbatim}
?- induce(<list of folds>,P).
\end{verbatim}
where \verb|<list of folds>| is a list of the folds for training and
\verb|P| will contain the learned program.

For example \href{http://cplint.lamping.unife.it/example/bongard.pl}{\texttt{bongard.pl}}, you can perform structure learning on the \verb|train| fold with 
\begin{verbatim}
?- induce([train],P).
\end{verbatim}
A program can also be tested on a test set with \verb|test/7| as
described above.

\input{learning_par}

\section{Manual in PDF}
A PDF version of the manual is available at
\url{https://github.com/friguzzi/cplint/blob/master/doc/help-cplint.pdf}.
\section{Bibliography}
\bibliographystyle{plain}
\bibliography{bib}
\end{document}